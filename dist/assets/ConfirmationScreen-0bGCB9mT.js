import{j as e,c as O}from"./packing-components-Dd-PQZIC.js";import{r as i,m as t}from"./framer-motion-BPVAyf_I.js";import{u as R,G as k,A as N}from"./index-CgaYjIAh.js";import{p as a}from"./audio-utils-BwnCMKX-.js";import{u as D}from"./react-router-BGTk-eDy.js";import{X as F,C as g,v as G,s as L,j as W,Z,i as $,T as Q,L as U,R as _,w as v,H as J}from"./lucide-react-CgSSDUFn.js";const K=({active:l})=>l?e.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(30)].map((o,s)=>e.jsx(t.div,{className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:["#3b82f6","#8b5cf6","#ec4899","#10b981","#f59e0b"][s%5],left:`${Math.random()*100}%`,top:"-10px"},initial:{y:-10,opacity:1},animate:{y:window.innerHeight+10,opacity:0,x:(Math.random()-.5)*100},transition:{duration:Math.random()*1.5+1.5,delay:Math.random()*.5,ease:"easeOut"}},s))}):null,ie=({order:l,packingTime:o,selectedPackage:s,onPrintLabel:w,onNewOrder:C,onEdit:z,packingStats:n,onClose:T})=>{const{addXP:c,updateStats:B}=R(),P=D(),[f,M]=i.useState(0),[r,j]=i.useState(!1),[E,X]=i.useState(!1),[q,I]=i.useState(!1),b=i.useRef(!1),h=50,d=o.time<60?25:o.time<120?15:0,m=n!=null&&n.perfectStreak?30:0,x=Math.min((n==null?void 0:n.combo)||0,20)*2,u=s.quantity>1?(s.quantity-1)*10:0,A=h+d+m+x+u;i.useEffect(()=>{const y=setInterval(()=>{M(p=>p<2?p+1:p)},800);return()=>clearInterval(y)},[]),i.useEffect(()=>{var y;b.current||(b.current=!0,setTimeout(()=>{c(h,"Order Completed"),I(!0)},500),d>0&&setTimeout(()=>c(d,"Speed Bonus"),1e3),m>0&&setTimeout(()=>c(m,"Perfect Accuracy"),1500),x>0&&setTimeout(()=>c(x,"Combo Bonus"),2e3),u>0&&setTimeout(()=>c(u,"Multi-Package Bonus"),2500),B({ordersProcessed:(((y=l.stats)==null?void 0:y.ordersProcessed)||0)+1,packingTime:o.time,packagesProcessed:s.quantity||1}))},[]);const H=()=>{j(!0),setTimeout(()=>{w(),j(!1),X(!0),a("success"),setTimeout(()=>{C()},1e3)},2e3)},S=()=>{a("transition"),P("/dashboard")};return e.jsxs(e.Fragment,{children:[e.jsx(K,{active:!0}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs(t.div,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},className:"bg-gray-900/95 backdrop-blur-xl p-8 rounded-3xl border border-gray-700 max-w-4xl w-full max-h-[90vh] overflow-y-auto text-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-pink-500/5 rounded-3xl"}),e.jsx(t.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},onClick:()=>{a("click"),T()},onMouseEnter:()=>a("hover"),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-full transition-colors z-20",children:e.jsx(F,{size:20})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(t.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,delay:.2},className:"w-20 h-20 bg-gradient-to-r from-green-400 to-green-600 rounded-full mx-auto mb-6 flex items-center justify-center",children:e.jsx(g,{size:40,className:"text-white"})}),e.jsx(t.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl font-bold text-white mb-2",children:"Pack Complete! ðŸŽ‰"}),e.jsxs(t.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-gray-400 mb-8",children:["Order ",l.orderId," successfully packed and ready for shipping"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsxs(t.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},className:"bg-gray-800/50 rounded-xl p-6",children:[e.jsx(G,{className:"mx-auto mb-3 text-blue-400",size:32}),e.jsx("p",{className:"text-3xl font-bold",children:f>=1?O(o.time):"0:00"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Pack Time"})]}),e.jsxs(t.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6},className:"bg-gray-800/50 rounded-xl p-6",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(t.div,{initial:{scale:0,rotate:-45},animate:{scale:1,rotate:0},transition:{delay:.7,type:"spring",stiffness:200,damping:15},children:e.jsx(k,{iconType:s.iconType||"box",actualQuantity:s.quantity||1,size:40,iconSize:"medium"})})}),e.jsx("p",{className:"text-3xl font-bold",children:f>=2?e.jsx(N,{target:s.quantity||1,duration:1e3}):"0"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Packages"})]}),e.jsxs(t.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},className:"bg-gray-800/50 rounded-xl p-6",children:[e.jsx(L,{className:"mx-auto mb-3 text-purple-400",size:32}),e.jsx("p",{className:"text-3xl font-bold text-blue-400",children:e.jsx(N,{target:A,duration:1500,prefix:"+",suffix:" XP"})}),e.jsx("p",{className:"text-sm text-gray-400",children:"Earned"})]})]}),q&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut",delay:.8},className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-6 mb-8",children:[e.jsxs("h4",{className:"font-semibold text-blue-300 mb-4 flex items-center justify-center",children:[e.jsx(W,{className:"mr-2",size:20}),"XP Breakdown"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(g,{className:"mr-2 text-gray-400",size:16}),"Base Completion"]}),e.jsxs("span",{className:"text-blue-400 font-bold",children:["+",h]})]}),d>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Z,{className:"mr-2 text-yellow-400",size:16}),"Speed Bonus"]}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:["+",d]})]}),m>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx($,{className:"mr-2 text-green-400",size:16}),"Perfect Accuracy"]}),e.jsxs("span",{className:"text-green-400 font-bold",children:["+",m]})]}),x>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Q,{className:"mr-2 text-purple-400",size:16}),"Combo Bonus"]}),e.jsxs("span",{className:"text-purple-400 font-bold",children:["+",x]})]}),u>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(U,{className:"mr-2 text-orange-400",size:16}),"Multi-Package Bonus"]}),e.jsxs("span",{className:"text-orange-400 font-bold",children:["+",u]})]})]})]}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-gray-800/30 rounded-xl p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Package Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Order:"}),e.jsx("span",{className:"font-bold text-white",children:l.orderId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Package:"}),e.jsxs("span",{className:"font-bold text-white",children:[s.quantity>1&&e.jsxs("span",{className:"text-blue-400 mr-1",children:[s.quantity," Ã—"]}),s.isCustom&&s.customType?s.customType==="pallet"?"Pallet":s.customType==="carton"?"Carton":"Item":s.name]})]}),s.courier&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Courier:"}),e.jsx("span",{className:"font-bold text-white",children:s.courier})]}),s.weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weight:"}),e.jsxs("span",{className:"font-bold text-white",children:[s.weight," kg"]})]})]})]}),E?e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:e.jsx("span",{className:"text-green-400 font-medium",children:"Proceeding to next order..."})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs(t.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{a("click"),z()},onMouseEnter:()=>a("hover"),className:"py-3 bg-white/10 hover:bg-white/20 text-white font-medium rounded-xl transition-all duration-300 flex items-center justify-center space-x-2",children:[e.jsx(_,{size:18}),e.jsx("span",{children:"Edit"})]}),e.jsx(t.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},whileHover:r?{}:{scale:1.05},whileTap:r?{}:{scale:.95},onClick:()=>{a("click"),H()},onMouseEnter:()=>!r&&a("hover"),disabled:r,className:`py-3 text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 ${r?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:shadow-lg hover:shadow-blue-500/25"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(t.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(v,{size:18})}),e.jsx("span",{children:"Printing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:18}),e.jsx("span",{children:"Print & Continue"})]})}),e.jsxs(t.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{a("click"),S()},onMouseEnter:()=>a("hover"),className:"py-3 bg-white/10 hover:bg-white/20 text-white font-medium rounded-xl transition-all duration-300 flex items-center justify-center space-x-2",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Dashboard"})]})]})]})]})})]})};export{ie as default};
